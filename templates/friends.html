{% extends 'base.html' %}

{% block title %}Friends{% endblock %}

{% block content %}
<style>
    .navbar {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 10px 0;
        background-color: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
    }
    .navbar a {
        text-decoration: none;
        color: #333;
        padding: 8px 16px;
        font-weight: 500;
    }
    .navbar a:hover {
        background-color: #e9ecef;
        border-radius: 4px;
    }
</style>

<div class="navbar">
    <a href="#search">Search function</a>
    <a href="#followers">Followers ({{ followers|length }})</a>
    <a href="#following">Following ({{ following|length }})</a>
    <a href="#friends">Friends ({{ all_friends|length }})</a>
    <a href="#friend-requests">Friend requests ({{ friend_requests|length }})</a>
    <a href="#suggested">Suggested</a>
</div>

{% if followers %}
    {% for follower in followers %}
    <div>
        <img src="{{ follower.profile_picture }}" alt="Profile Picture">
        <div>
            <h3>{{ follower.realName }}</h3>
            <p>{{ follower.mutual_count }} mutual friends/followers</p>
        </div>
        <button>Block</button>
    </div>
    {% endfor %}
{% else %}
    <div>
        <p>No one is following you yet.</p>
        <p>Share your profile with friends to get followers!</p>
    </div>
{% endif %}

{% if following %}
    {% for user in following %}
    <div>
        <img src="{{ user.profile_picture }}" alt="Profile Picture">
        <div>
            <h3>{{ user.realName }}</h3>
            <p>{{ user.mutual_count }} mutual friends/followers</p>
        </div>
        <div>
            <button>Unfollow</button>
            <button>Block</button>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div>
        <p>No one is following you yet.</p>
        <p>Follow people you know to see their posts and updates here.</p>
    </div>
{% endif %}

{% if all_friends %}
    {% for friend in all_friends %}
    <div>
        <img src="{{ friend.profile_picture }}" alt="Profile Picture">
        <div>
            <h3>{{ friend.realName }}</h3>
            <p>{{ friend.mutual_count }} mutual friends/followers</p>
        </div>
        <div>
            <button>Unfollow</button>
            <button>Block</button>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div>
        <p>You have no friends yet.</p>
        <p>Explore suggested users or use the search bar to find people.</p>
    </div>
{% endif %}

{% if friend_requests %}
    {% for request in friend_requests %}
    <div>
        <img src="{{ request.sender_profile_picture }}" alt="Profile Picture">
        <div>
            <h3>{{ request.sender_realName }}</h3>
            <p>{{ request.mutual_count }} mutual friends/followers</p>
        </div>
        <button>Accept</button>
        <button>Decline</button>
        <button>Block</button>
    </div>
    {% endfor %}
{% else %}
    <div>
        <p>You have no new friend requests.</p>
        <p>Come back later or send some of your own!</p>
    </div>
{% endif %}

{% if suggested_users %}
    {% for user in suggested_users %}
    <div>
        <img src="{{ user.profile_picture }}" alt="Profile Picture">
        <div>
            <h3>{{ user.realName }}</h3>
            <p>{{ user.mutual_count }} mutual friends/followers</p>
        </div>
        <button>Follow</button>
        <button>Remove</button>
        <button>Block</button>
    </div>
    {% endfor %}
{% else %}
    <div>
        <p>No suggested users for now.</p>
        <p>Check back later or search for people you may know.</p>
    </div>
{% endif %}

{% endblock %}
